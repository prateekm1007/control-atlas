services:
  brain:
    build: ./backend
    container_name: toscanini_brain
    environment: ["GEMINI_API_KEY=${GEMINI_API_KEY}"]
    ports: ["8000:8000"]
    volumes: ["./nkg:/app/nkg", "./governance:/app/governance"]
    restart: always

  face:
    build: ./dashboard
    container_name: toscanini_face
    # WELD: The 'links' directive is a legacy but unstoppable way to connect containers
    links:
      - brain
    ports: ["8502:8501"]
    depends_on:
      - brain
    restart: always
